<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 视频生成系统 - VideoGen</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">🎬</div>
                <h1>VideoGen</h1>
            </div>

            <nav class="nav-steps">
                <div class="nav-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-info">
                        <div class="step-title">需求理解</div>
                        <div class="step-desc">输入创作需求</div>
                    </div>
                </div>

                <div class="nav-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-info">
                        <div class="step-title">剧本创作</div>
                        <div class="step-desc">AI 编写剧本</div>
                    </div>
                </div>

                <div class="nav-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-info">
                        <div class="step-title">分镜设计</div>
                        <div class="step-desc">生成分镜脚本</div>
                    </div>
                </div>

                <div class="nav-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-info">
                        <div class="step-title">图像生成</div>
                        <div class="step-desc">生成关键帧</div>
                    </div>
                </div>

                <div class="nav-step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-info">
                        <div class="step-title">视频合成</div>
                        <div class="step-desc">生成最终视频</div>
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="project-info">
                    <div class="info-item">
                        <span class="label">项目ID</span>
                        <span class="value" id="project-id">-</span>
                    </div>
                    <div class="info-item">
                        <span class="label">状态</span>
                        <span class="value status" id="project-status">待开始</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <h2 id="current-step-title">需求理解与拆分</h2>
                    <p id="current-step-desc">请描述您想要创作的视频内容</p>
                </div>
                <div class="header-right">
                    <button class="btn-icon" id="settings-btn">⚙️</button>
                    <button class="btn-icon" id="help-btn">❓</button>
                </div>
            </header>

            <!-- 步骤 1: 需求理解 -->
            <div class="step-content active" id="step-1">
                <div class="input-section">
                    <div class="input-header">
                        <h3>描述您的创意</h3>
                        <p>请详细描述您想要创作的视频内容、风格、时长等要求</p>
                    </div>

                    <textarea id="user-requirement" class="requirement-input"
                        placeholder="例如：我想制作一个 30 秒的产品宣传视频，展示一款智能手表的主要功能。风格要现代、科技感强，目标受众是年轻人。视频需要包含产品外观展示、功能演示和使用场景。"
                        rows="8"></textarea>

                    <div class="quality-settings">
                        <div class="setting-group">
                            <label>视频时长</label>
                            <select id="video-duration">
                                <option value="15">15 秒</option>
                                <option value="30" selected>30 秒</option>
                                <option value="60">60 秒</option>
                                <option value="90">90 秒</option>
                                <option value="120">120 秒</option>
                            </select>
                        </div>

                        <div class="setting-group">
                            <label>质量档位</label>
                            <select id="quality-tier">
                                <option value="PREVIEW">预览 (PREVIEW)</option>
                                <option value="STANDARD" selected>标准 (STANDARD)</option>
                                <option value="HIGH">高质量 (HIGH)</option>
                                <option value="ULTRA">超高清 (ULTRA)</option>
                            </select>
                        </div>

                        <div class="setting-group">
                            <label>视频风格</label>
                            <select id="video-style">
                                <option value="realistic">真实</option>
                                <option value="cinematic">电影感</option>
                                <option value="anime">动漫</option>
                                <option value="artistic">艺术</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn-primary btn-large" id="analyze-requirement-btn">
                        <span class="btn-icon">🚀</span>
                        开始分析需求
                    </button>
                </div>

                <div class="analysis-result" id="analysis-result" style="display: none;">
                    <h3>需求分析结果</h3>
                    <div class="result-grid">
                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">🎯</span>
                                <span class="card-title">核心主题</span>
                            </div>
                            <div class="card-content" id="analysis-theme"></div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">🎨</span>
                                <span class="card-title">视觉风格</span>
                            </div>
                            <div class="card-content" id="analysis-style"></div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">🎬</span>
                                <span class="card-title">镜头数量</span>
                            </div>
                            <div class="card-content" id="analysis-shots"></div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">⏱️</span>
                                <span class="card-title">预计时长</span>
                            </div>
                            <div class="card-content" id="analysis-duration"></div>
                        </div>
                    </div>

                    <button class="btn-primary btn-large" id="proceed-to-script-btn">
                        下一步：生成剧本
                    </button>
                </div>
            </div>

            <!-- 步骤 2: 剧本创作 -->
            <div class="step-content" id="step-2">
                <div class="script-section">
                    <div class="generation-status" id="script-status">
                        <div class="status-icon loading">⏳</div>
                        <div class="status-text">
                            <h3>正在生成剧本...</h3>
                            <p>AI 正在根据您的需求创作剧本</p>
                        </div>
                    </div>

                    <div class="script-result" id="script-result" style="display: none;">
                        <div class="script-header">
                            <h3>剧本内容</h3>
                            <div class="script-actions">
                                <button class="btn-secondary" id="regenerate-script-btn">🔄 重新生成</button>
                                <button class="btn-secondary" id="edit-script-btn">✏️ 编辑</button>
                            </div>
                        </div>

                        <div class="script-content" id="script-content"></div>

                        <button class="btn-primary btn-large" id="proceed-to-storyboard-btn">
                            下一步：生成分镜
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤 3: 分镜设计 -->
            <div class="step-content" id="step-3">
                <div class="storyboard-section">
                    <div class="generation-status" id="storyboard-status">
                        <div class="status-icon loading">⏳</div>
                        <div class="status-text">
                            <h3>正在生成分镜...</h3>
                            <p>AI 正在设计分镜脚本</p>
                        </div>
                    </div>

                    <div class="storyboard-result" id="storyboard-result" style="display: none;">
                        <div class="storyboard-header">
                            <h3>分镜脚本</h3>
                            <div class="view-toggle">
                                <button class="toggle-btn active" data-view="list">📋 列表</button>
                                <button class="toggle-btn" data-view="grid">📐 网格</button>
                            </div>
                        </div>

                        <div class="storyboard-list" id="storyboard-list"></div>

                        <button class="btn-primary btn-large" id="proceed-to-images-btn">
                            下一步：生成图像
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤 4: 图像生成 -->
            <div class="step-content" id="step-4">
                <div class="images-section">
                    <div class="generation-progress" id="images-progress">
                        <h3>生成关键帧图像</h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="images-progress-fill"></div>
                        </div>
                        <p class="progress-text" id="images-progress-text">0 / 0 已完成</p>
                    </div>

                    <div class="images-grid" id="images-grid"></div>

                    <div class="images-actions" id="images-actions" style="display: none;">
                        <button class="btn-primary btn-large" id="proceed-to-video-btn">
                            下一步：合成视频
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤 5: 视频合成 -->
            <div class="step-content" id="step-5">
                <div class="video-section">
                    <div class="generation-status" id="video-status">
                        <div class="status-icon loading">⏳</div>
                        <div class="status-text">
                            <h3>正在合成视频...</h3>
                            <p>AI 正在将所有内容合成为最终视频</p>
                        </div>
                    </div>

                    <div class="video-result" id="video-result" style="display: none;">
                        <h3>✨ 视频已生成完成！</h3>
                        <div class="video-player">
                            <video id="final-video" controls></video>
                        </div>

                        <div class="video-actions">
                            <button class="btn-primary" id="download-video-btn">
                                <span class="btn-icon">⬇️</span>
                                下载视频
                            </button>
                            <button class="btn-secondary" id="share-video-btn">
                                <span class="btn-icon">🔗</span>
                                分享
                            </button>
                            <button class="btn-secondary" id="new-project-btn">
                                <span class="btn-icon">➕</span>
                                新建项目
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p id="loading-text">处理中...</p>
    </div>

    <script src="app.js"></script>
    <script>
        // 切换分镜详情显示/隐藏
        function toggleShotDetails(shotNum) {
            const card = document.querySelector(`.shot-card[data-shot="${shotNum}"]`);
            if (!card) return;

            const body = card.querySelector('.shot-body');
            const icon = card.querySelector('.expand-icon');

            if (body.style.display === 'none' || !body.style.display) {
                body.style.display = 'block';
                icon.textContent = '▲';
                card.classList.add('expanded');
            } else {
                body.style.display = 'none';
                icon.textContent = '▼';
                card.classList.remove('expanded');
            }
        }
    </script>
</body>

</html>