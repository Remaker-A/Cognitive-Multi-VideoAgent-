<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 视频生成系统 - VideoGen</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <!-- 侧边?-->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">🎬</div>
                <h1>VideoGen</h1>
            </div>

            <nav class="nav-steps">
                <div class="nav-step active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-info">
                        <div class="step-title">需求理?/div>
                        <div class="step-desc">输入创作需?/div>
                    </div>
                </div>

                <div class="nav-step" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-info">
                        <div class="step-title">剧本创作</div>
                        <div class="step-desc">AI 编写剧本</div>
                    </div>
                </div>

                <div class="nav-step" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-info">
                        <div class="step-title">分镜设计</div>
                        <div class="step-desc">生成分镜脚本</div>
                    </div>
                </div>

                <div class="nav-step" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-info">
                        <div class="step-title">图像生成</div>
                        <div class="step-desc">生成关键?/div>
                    </div>
                </div>

                <div class="nav-step" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-info">
                        <div class="step-title">视频合成</div>
                        <div class="step-desc">生成最终视?/div>
                    </div>
                </div>
            </nav>

            <div class="sidebar-footer">
                <div class="project-info">
                    <div class="info-item">
                        <span class="label">项目ID</span>
                        <span class="value" id="project-id">-</span>
                    </div>
                    <div class="info-item">
                        <span class="label">状?/span>
                        <span class="value status" id="project-status">待开?/span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- 主内容区 -->
        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <h2 id="current-step-title">需求理解与拆分</h2>
                    <p id="current-step-desc">请描述您想要创作的视频内?/p>
                </div>
                <div class="header-right">
                    <button class="btn-icon" id="settings-btn">⚙️</button>
                    <button class="btn-icon" id="help-btn">?/button>
                </div>
            </header>

            <!-- 步骤 1: 需求理?-->
            <div class="step-content active" id="step-1">
                <div class="input-section">
                    <div class="input-header">
                        <h3>描述您的创意</h3>
                        <p>请详细描述您想要创作的视频内容、风格、时长等要求</p>
                    </div>

                    <textarea id="user-requirement" class="requirement-input"
                        placeholder="例如：我想制作一?30 秒的产品宣传视频，展示一款智能手表的主要功能。风格要现代、科技感强，目标受众是年轻人。视频需要包含产品外观展示、功能演示和使用场景?
                        rows="8"></textarea>

                    <div class="quality-settings">
                        <div class="setting-group">
                            <label>视频时长</label>
                            <select id="video-duration">
                                <option value="15">15 ?/option>
                                <option value="30" selected>30 ?/option>
                                <option value="60">60 ?/option>
                                <option value="90">90 ?/option>
                                <option value="120">120 ?/option>
                            </select>
                        </div>

                        <div class="setting-group">
                            <label>质量档位</label>
                            <select id="quality-tier">
                                <option value="PREVIEW">预览 (PREVIEW)</option>
                                <option value="STANDARD" selected>标准 (STANDARD)</option>
                                <option value="HIGH">高质?(HIGH)</option>
                                <option value="ULTRA">超高?(ULTRA)</option>
                            </select>
                        </div>

                        <div class="setting-group">
                            <label>视频风格</label>
                            <select id="video-style">
                                <option value="realistic">真实</option>
                                <option value="cinematic">电影?/option>
                                <option value="anime">动漫</option>
                                <option value="artistic">艺术</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn-primary btn-large" id="analyze-requirement-btn">
                        <span class="btn-icon">🚀</span>
                        开始分析需?
                    </button>
                </div>

                <div class="analysis-result" id="analysis-result" style="display: none;">
                    <h3>需求分析结?/h3>
                    <div class="result-grid">
                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">🎯</span>
                                <span class="card-title">核心主题</span>
                            </div>
                            <div class="card-content" id="analysis-theme"></div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">🎨</span>
                                <span class="card-title">视觉风格</span>
                            </div>
                            <div class="card-content" id="analysis-style"></div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">🎬</span>
                                <span class="card-title">镜头数量</span>
                            </div>
                            <div class="card-content" id="analysis-shots"></div>
                        </div>

                        <div class="result-card">
                            <div class="card-header">
                                <span class="card-icon">⏱️</span>
                                <span class="card-title">预计时长</span>
                            </div>
                            <div class="card-content" id="analysis-duration"></div>
                        </div>
                    </div>

                    <button class="btn-primary btn-large" id="proceed-to-script-btn">
                        下一步：生成剧本
                    </button>
                </div>
            </div>

            <!-- 步骤 2: 剧本创作 -->
            <div class="step-content" id="step-2">
                <div class="script-section">
                    <div class="generation-status" id="script-status">
                        <div class="status-icon loading">?/div>
                        <div class="status-text">
                            <h3>正在生成剧本...</h3>
                            <p>AI 正在根据您的需求创作剧?/p>
                        </div>
                    </div>

                    <div class="script-result" id="script-result" style="display: none;">
                        <div class="script-header">
                            <h3>剧本内容</h3>
                            <div class="script-actions">
                                <button class="btn-secondary" id="regenerate-script-btn">🔄 重新生成</button>
                                <button class="btn-secondary" id="edit-script-btn">✏️ 编辑</button>
                            </div>
                        </div>

                        <div class="script-and-characters">
                            <div class="script-column">
                                <div class="script-content" id="script-content"></div>
                            </div>

                            <div class="characters-column">
                                <h4 class="characters-title">角色列表</h4>
                                <div id="characters-list" class="characters-list"></div>
                            </div>
                        </div>

                        <button class="btn-primary btn-large" id="proceed-to-storyboard-btn">
                            下一步：生成分镜
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤 3: 分镜设计 -->
            <div class="step-content" id="step-3">
                <div class="storyboard-section">
                    <div class="generation-status" id="storyboard-status">
                        <div class="status-icon loading">?/div>
                        <div class="status-text">
                            <h3>正在生成分镜...</h3>
                            <p>AI 正在设计分镜脚本</p>
                        </div>
                    </div>

                    <div class="storyboard-result" id="storyboard-result" style="display: none;">
                        <div class="storyboard-header">
                            <h3>分镜脚本</h3>
                            <div class="view-toggle">
                                <button class="toggle-btn active" data-view="list">📋 列表</button>
                                <button class="toggle-btn" data-view="grid">📐 网格</button>
                            </div>
                        </div>

                        <div class="storyboard-list" id="storyboard-list"></div>

                        <button class="btn-primary btn-large" id="proceed-to-images-btn">
                            下一步：生成图像
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤 4: 图像生成 -->
            <div class="step-content" id="step-4">
                <div class="images-section">
                    <div class="generation-progress" id="images-progress">
                        <h3>生成关键帧图?/h3>
                        <div class="progress-bar">
                            <div class="progress-fill" id="images-progress-fill"></div>
                        </div>
                        <p class="progress-text" id="images-progress-text">0 / 0 已完?/p>
                    </div>

                    <div class="images-grid" id="images-grid"></div>

                    <div class="images-actions" id="images-actions" style="display: none;">
                        <button class="btn-primary btn-large" id="proceed-to-video-btn">
                            下一步：合成视频
                        </button>
                    </div>
                </div>
            </div>

            <!-- 步骤 5: 视频合成 -->
            <div class="step-content" id="step-5">
                <div class="video-section">
                    <div class="generation-status" id="video-status">
                        <div class="status-icon loading">?/div>
                        <div class="status-text">
                            <h3>正在生成视频...</h3>
                            <p>AI 正在为每个镜头生成视?/p>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="video-progress-fill"></div>
                        </div>
                        <p class="progress-text" id="video-progress-text">0 / 0 已完?/p>
                    </div>

                    <div class="video-cards-container" id="video-cards-container" style="display: none;">
                        <div class="video-cards-header">
                            <h3>视频分镜</h3>
                            <button class="btn-secondary" onclick="downloadAllVideos()">📥 下载全部</button>
                        </div>
                        <div class="video-cards-grid" id="video-cards-grid"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p id="loading-text">处理?..</p>
    </div>

    <!-- Shot Edit Modal -->
    <div class="modal-overlay" id="shot-edit-modal" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>编辑镜头 <span id="edit-shot-number"></span></h3>
                <button class="modal-close-btn" onclick="closeEditModal()">?/button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>场景</label>
                    <textarea id="edit-scene" rows="2" placeholder="描述场景位置、环?.."></textarea>
                </div>
                <div class="form-group">
                    <label>人物/主体</label>
                    <input type="text" id="edit-characters" placeholder="主要人物或主?>
                </div>
                <div class="form-group">
                    <label>动作</label>
                    <textarea id="edit-action" rows="2" placeholder="人物动作和行?.."></textarea>
                </div>
                <div class="form-group">
                    <label>视觉元素</label>
                    <textarea id="edit-visual-elements" rows="2" placeholder="色彩、光线、构图等..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>镜头类型</label>
                        <select id="edit-camera">
                            <option>特写</option>
                            <option>近景</option>
                            <option>中景</option>
                            <option>全景</option>
                            <option>远景</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>角度</label>
                        <select id="edit-angle">
                            <option>平视</option>
                            <option>俯视</option>
                            <option>仰视</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>镜头运动</label>
                        <select id="edit-movement">
                            <option>静止</option>
                            <option>推进</option>
                            <option>拉远</option>
                            <option>摇移</option>
                            <option>跟随</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>转场</label>
                        <select id="edit-transition">
                            <option>?/option>
                            <option>淡入淡出</option>
                            <option>叠化</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>情绪</label>
                        <input type="text" id="edit-emotion" placeholder="情绪氛围">
                    </div>
                    <div class="form-group">
                        <label>时长（秒?/label>
                        <input type="number" id="edit-duration" min="1" max="30" value="4">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeEditModal()">取消</button>
                <button class="btn-primary" onclick="confirmEditShot()">保存</button>
            </div>
        </div>
    </div>

    <!-- Script Editor Modal -->
    <div class="modal-overlay" id="script-editor-modal" style="display: none;">
        <div class="modal-container">
            <div class="modal-header">
                <h3>编辑剧本</h3>
                <button class="modal-close-btn" onclick="closeScriptEditor()">?/button>
            </div>
            <div class="modal-body">
                <textarea id="script-editor-textarea" class="script-editor" rows="20"
                    placeholder="在此编辑剧本内容..."></textarea>
            </div>
            <div class="modal-footer">
                <button class="btn-secondary" onclick="closeScriptEditor()">取消</button>
                <button class="btn-primary" onclick="saveScriptEdits()">
                    <span class="btn-icon">💾</span>
                    保存修改
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // 切换分镜详情显示/隐藏
        function toggleShotDetails(shotNum) {
            const card = document.querySelector(`.shot-card[data-shot="${shotNum}"]`);
            if (!card) return;

            const body = card.querySelector('.shot-body');
            const icon = card.querySelector('.expand-icon');

            if (body.style.display === 'none' || !body.style.display) {
                body.style.display = 'block';
                icon.textContent = '?;
                card.classList.add('expanded');
            } else {
                body.style.display = 'none';
                icon.textContent = '?;
                card.classList.remove('expanded');
            }
        }
    </script>
</body>

</html>